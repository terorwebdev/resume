!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@angular/material/table"),require("@angular/material/paginator"),require("@angular/material/slider"),require("@angular/material/form-field"),require("@angular/material/expansion"),require("@angular/material/card"),require("@angular/material/button"),require("@angular/common"),require("@angular/forms"),require("@angular/material/icon")):"function"==typeof define&&define.amd?define("ngx-audio-player",["exports","@angular/core","rxjs","@angular/material/table","@angular/material/paginator","@angular/material/slider","@angular/material/form-field","@angular/material/expansion","@angular/material/card","@angular/material/button","@angular/common","@angular/forms","@angular/material/icon"],e):e((t=t||self)["ngx-audio-player"]={},t.ng.core,t.rxjs,t.ng.material.table,t.ng.material.paginator,t.ng.material.slider,t.ng.material["form-field"],t.ng.material.expansion,t.ng.material.card,t.ng.material.button,t.ng.common,t.ng.forms,t.ng.material.icon)}(this,(function(t,e,n,a,i,o,l,r,s,p,d,c,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function m(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function g(t,e,n,a){var i,o=arguments.length,l=o<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(l=(o<3?i(l):o>3?i(e,n,l):i(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l}function y(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var v=function(){function t(){this.playlist=[],this.indexSong=0,this.currentTrack=new n.BehaviorSubject(this.playlist[this.indexSong]),this.currentTime=0,this.duration=0}return t.prototype.init=function(){this.updateCurrentSong()},t.prototype.nextSong=function(){this.indexSong+1>=this.playlist.length?this.indexSong=0:this.indexSong++,this.updateCurrentSong()},t.prototype.previousSong=function(){this.indexSong-1<0?this.indexSong=this.playlist.length-1:this.indexSong--,this.updateCurrentSong()},t.prototype.resetPlaylist=function(){this.indexSong=0,this.updateCurrentSong()},t.prototype.selectATrack=function(t){this.indexSong=t-1,this.updateCurrentSong()},t.prototype.updateCurrentSong=function(){var t=this.playlist[this.indexSong],e=this.indexSong-1>=0?this.playlist[this.indexSong-1]:this.playlist[this.playlist.length-1],n=this.indexSong+1>=this.playlist.length?this.playlist[0]:this.playlist[this.indexSong+1];this.currentTrack.next([e,t,n])},t.prototype.getSubjectCurrentTrack=function(){return this.currentTrack},t.prototype.getPlaylist=function(){return this.playlist},t.prototype.setPlaylist=function(t){this.playlist=t},t.prototype.getIndexSong=function(){return this.indexSong},t=g([e.Injectable(),y("design:paramtypes",[])],t)}(),f=function(){function t(){this.loaderDisplay=!1,this.isPlaying=!1,this.currentTime=0,this.volume=.1,this.duration=.01}return t.prototype.currTimePosChanged=function(t){this.player.nativeElement.currentTime=t.value},t.prototype.bindPlayerEvent=function(){var t=this;this.player.nativeElement.addEventListener("playing",(function(){t.isPlaying=!0,t.duration=Math.floor(t.player.nativeElement.duration)})),this.player.nativeElement.addEventListener("pause",(function(){t.isPlaying=!1})),this.player.nativeElement.addEventListener("timeupdate",(function(){t.currentTime=Math.floor(t.player.nativeElement.currentTime)})),this.player.nativeElement.addEventListener("volume",(function(){t.volume=Math.floor(t.player.nativeElement.volume)})),this.player.nativeElement.addEventListener("loadstart",(function(){t.loaderDisplay=!0})),this.player.nativeElement.addEventListener("loadeddata",(function(){t.loaderDisplay=!1,t.duration=Math.floor(t.player.nativeElement.duration)}))},t.prototype.playBtnHandler=function(){this.loaderDisplay||(this.player.nativeElement.paused?this.player.nativeElement.play(this.currentTime):(this.currentTime=this.player.nativeElement.currentTime,this.player.nativeElement.pause()))},t.prototype.play=function(){var t=this;setTimeout((function(){t.player.nativeElement.play()}),0)},t.prototype.toggleVolume=function(){0===this.volume?this.setVolume(1):this.setVolume(0)},t.prototype.setVolume=function(t){this.volume=t,this.player.nativeElement.volume=this.volume},g([e.ViewChild("audioPlayer",{static:!0}),y("design:type",e.ElementRef)],t.prototype,"player",void 0),t}(),x=function(t){function n(e){var n=t.call(this)||this;return n.playlistService=e,n.displayedColumns=["title","status"],n.dataSource=new a.MatTableDataSource,n.displayTitle=!0,n.displayPlaylist=!0,n.pageSizeOptions=[10,20,30],n.expanded=!0,n.autoPlay=!1,n.displayVolumeControls=!0,n}return m(n,t),n.prototype.ngOnInit=function(){var e=this;this.setDataSourceAttributes(),this.bindPlayerEvent(),this.player.nativeElement.addEventListener("ended",(function(){e.checkIfSongHasStartedSinceAtleastTwoSeconds()&&e.nextSong()})),this.playlistService.setPlaylist(this.playlistData),this.playlistService.getSubjectCurrentTrack().subscribe((function(t){e.playlistTrack=t})),this.player.nativeElement.currentTime=0,this.playlistService.init(),this.autoPlay&&t.prototype.play.call(this)},Object.defineProperty(n.prototype,"matPaginator",{set:function(t){this.paginator=t,this.setDataSourceAttributes()},enumerable:!0,configurable:!0}),n.prototype.setDataSourceAttributes=function(){var t=1;this.playlistData&&(this.playlistData.forEach((function(e){e.index=t++})),this.dataSource=new a.MatTableDataSource(this.playlistData),this.dataSource.paginator=this.paginator)},n.prototype.nextSong=function(){1!=this.displayPlaylist||(this.playlistService.indexSong+1)%this.paginator.pageSize!=0&&this.playlistService.indexSong+1!==this.paginator.length||(this.paginator.hasNextPage()?this.paginator.nextPage():this.paginator.hasNextPage()||this.paginator.firstPage()),this.currentTime=0,this.duration=.01,this.playlistService.nextSong(),this.play()},n.prototype.previousSong=function(){this.currentTime=0,this.duration=.01,this.checkIfSongHasStartedSinceAtleastTwoSeconds()?this.resetSong():(1!=this.displayPlaylist||this.playlistService.indexSong%this.paginator.pageSize!=0&&0!==this.playlistService.indexSong||(this.paginator.hasPreviousPage()?this.paginator.previousPage():this.paginator.hasPreviousPage()||this.paginator.lastPage()),this.playlistService.previousSong()),this.play()},n.prototype.resetSong=function(){this.player.nativeElement.src=this.playlistTrack[1].link},n.prototype.selectTrack=function(t){var e=this;console.log("selectTrack(index: number): void: "+t),this.playlistService.selectATrack(t),setTimeout((function(){e.player.nativeElement.play()}),0)},n.prototype.checkIfSongHasStartedSinceAtleastTwoSeconds=function(){return this.player.nativeElement.currentTime>2},Object.defineProperty(n.prototype,"playlist",{set:function(t){this.playlistData=t,this.ngOnInit()},enumerable:!0,configurable:!0}),n.ctorParameters=function(){return[{type:v}]},g([e.Input(),y("design:type",Object)],n.prototype,"displayTitle",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"displayPlaylist",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"pageSizeOptions",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"expanded",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"autoPlay",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"displayVolumeControls",void 0),g([e.ViewChild(i.MatPaginator,{static:!1}),y("design:type",i.MatPaginator),y("design:paramtypes",[i.MatPaginator])],n.prototype,"matPaginator",null),g([e.Input(),y("design:type",Array),y("design:paramtypes",[Array])],n.prototype,"playlist",null),n=g([e.Component({selector:"mat-advanced-audio-player",template:'<mat-card class="d-flex justify-content-center ngx-advanced-audio-player z-depth-1 mat-elevation-z2" style="margin: 0px;">\n  \n  <audio [src]="playlistTrack[1].link" #audioPlayer></audio>\n\n    <button class="p-1" mat-button (click)=\'previousSong();\'\n      [disabled]="loaderDisplay">\n      <mat-icon aria-hidden="true">\n        \x3c!-- Skip previous icon (skip_previous) --\x3e\n        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/><path d="M0 0h32v32H0z" fill="none"/></svg>\n      </mat-icon>\n    </button>\n    <button mat-button class="p-1 play-pause" (click)=\'playBtnHandler();\' [disabled]="loaderDisplay">\n        <mat-icon *ngIf="!loaderDisplay && !isPlaying" class="play-track" aria-hidden="true">\n          \x3c!-- Play icon (play_arrow) --\x3e\n          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n        </mat-icon>\n        <mat-icon *ngIf="!loaderDisplay && isPlaying" class="pause-track" aria-hidden="true">\n          \x3c!-- Pause icon (pause) --\x3e\n          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n        </mat-icon>\n    </button>\n    <button mat-button class="p-1 skip-next" (click)=\'nextSong();\' [disabled]="loaderDisplay">\n      <mat-icon class="next-track" aria-hidden="true">\n        \x3c!-- Skip next icon (skip_next) --\x3e\n        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n      </mat-icon>\n    </button>\n\n  <div class="col">\n    <div class="d-flex flex-fill justify-content-center">\n      <div class="d-none d-sm-block py-3 px-1" style="font-size: 12px">\n        <span *ngIf="duration !== 0.01">\n          {{currentTime | secondsToMinutes}}\n        </span>\n      </div>\n      <mat-slider class="d-none d-sm-block flex-fill p-1" style="width: 100%" min="0" max="{{duration}}" value="{{currentTime}}"\n        (change)="currTimePosChanged($event)"></mat-slider>\n\n      <div class="py-3 px-1" style="font-size: 12px; text-align: right">\n        <span *ngIf="duration !== 0.01">\n          -{{duration-currentTime | secondsToMinutes }}\n        </span>\n      </div>\n    </div>\n  </div>\n  <button *ngIf="displayVolumeControls" mat-button class="p-1 volume" (click)=\'toggleVolume();\'>\n    <mat-icon *ngIf="volume === 0" class="volume-mute" aria-hidden="true">\n      \x3c!-- Volume mute icon (volume_off) --\x3e\n      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n    </mat-icon>\n    <mat-icon *ngIf="volume > 0" class="volume-up" aria-hidden="true">\n      \x3c!-- Volume up icon (volume_up) --\x3e\n      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n    </mat-icon>\n  </button>\n</mat-card>\n\n<mat-card *ngIf="displayTitle" class="mat-elevation-z1">\n  <div style="text-align: center;">\n    <div style="margin: 1px 2px; padding: 1em">\n      <span *ngIf="!isPlaying">{{ playlistTrack[1].title }}</span>\n      <marquee *ngIf="isPlaying" behavior="scroll" direction="left">{{ playlistTrack[1].title }}</marquee>\n    </div>\n    <div class="clear"></div>\n  </div>\n</mat-card>\n\n<mat-accordion *ngIf="displayPlaylist">\n  <mat-expansion-panel [expanded]="expanded">\n    <mat-expansion-panel-header>\n      Play List\n    </mat-expansion-panel-header>\n    <table mat-table [dataSource]="dataSource" class="mat-elevation-z6">\n      <ng-container matColumnDef="title">\n        <th mat-header-cell *matHeaderCellDef> Title </th>\n        <td mat-cell *matCellDef="let element" (click)="selectTrack(element.index)"> {{element.title}} </td>\n      </ng-container>\n      <ng-container matColumnDef="status">\n        <th mat-header-cell *matHeaderCellDef> </th>\n        <td mat-cell *matCellDef="let element">\n          <div *ngIf="playlistTrack[1].title === element.title">\n            \x3c!-- <mat-icon *ngIf="isPlaying" aria-hidden="true">\n              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n            </mat-icon> --\x3e\n            <mat-icon class="currently-playing" *ngIf="isPlaying" aria-hidden="true">\n              \x3c!-- Play icon (play_arrow) --\x3e\n              <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>\n            </mat-icon>\n          </div>\n        </td>\n      </ng-container>\n      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n      <tr class="mat-select-content" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n    </table>\n    <mat-paginator [pageSizeOptions]="pageSizeOptions" showFirstLastButtons></mat-paginator>\n  </mat-expansion-panel>\n</mat-accordion>',styles:["@import url(https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/css/bootstrap-grid.min.css);mat-card{padding:0!important;background:rgba(0,0,0,.02)}mat-slider{max-height:30px}table{width:100%}button:focus,button:hover{outline:0!important}.ngx-advanced-audio-player{min-width:325px}.mat-icon{height:32px!important;width:32px!important}.material-icons{font-size:16px!important}mat-icon>.currently-playing{height:16px!important;width:16px!important}.play-pause{border-left:2px solid rgba(0,0,0,.1);border-right:2px solid rgba(0,0,0,.1)}.volume{border-left:2px solid rgba(0,0,0,.1)}.skip-next{border-right:2px solid rgba(0,0,0,.1)}"]}),y("design:paramtypes",[v])],n)}(f),b=function(t){function n(){var e=t.call(this)||this;return e.displayTitle=!1,e.autoPlay=!1,e.displayVolumeControls=!0,e}return m(n,t),n.prototype.ngOnInit=function(){this.bindPlayerEvent(),this.autoPlay&&t.prototype.play.call(this)},n.prototype.resetSong=function(){this.player.nativeElement.src=this.audioUrl},g([e.Input(),y("design:type",String)],n.prototype,"title",void 0),g([e.Input(),y("design:type",String)],n.prototype,"audioUrl",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"displayTitle",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"autoPlay",void 0),g([e.Input(),y("design:type",Object)],n.prototype,"displayVolumeControls",void 0),n=g([e.Component({selector:"mat-basic-audio-player",template:'<mat-card class="d-flex ngx-basic-audio-player z-depth-1 mat-elevation-z1">\n    <audio [src]="audioUrl" #audioPlayer></audio>\n    <button mat-button (click)=\'playBtnHandler();\' class="ngx-basic-audio-player-button-handler"\n        style="font-size: 14px!important;" [disabled]="loaderDisplay">\n            <mat-icon *ngIf="!loaderDisplay && !isPlaying" class="play-track" aria-hidden="true">\n                \x3c!-- Play icon (play_arrow) --\x3e\n                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n            </mat-icon>\n            <mat-icon *ngIf="!loaderDisplay && isPlaying" class="pause-track" aria-hidden="true">\n                \x3c!-- Pause icon (pause) --\x3e\n                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n            </mat-icon>\n    </button>\n    <div class="flex-fill pl-1 ngx-basic-audio-player-slider">\n        <mat-slider style="width: 100%" min="0" max="{{duration}}" value="{{currentTime}}"\n            (change)="currTimePosChanged($event)"></mat-slider>\n    </div>\n    <div class="d-flex ngx-basic-audio-player-duration">\n        <span *ngIf="duration !== 0.01" class="pl-2 pr-3 my-auto" style="font-size: 14px!important;">\n            -{{duration-currentTime |\n            secondsToMinutes }}\n        </span>\n    </div>\n    <button *ngIf="displayVolumeControls" mat-button (click)=\'toggleVolume();\'\n        style="padding: 0px!important; min-width:48px!important;">\n        <mat-icon *ngIf="volume === 0" class="volume-mute" aria-hidden="true">\n            \x3c!-- Volume mute icon (volume_off) --\x3e\n            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n          </mat-icon>\n          <mat-icon *ngIf="volume > 0" class="volume-up" aria-hidden="true">\n            \x3c!-- Volume up icon (volume_up) --\x3e\n            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\n          </mat-icon>\n    </button>\n</mat-card>\n\n<mat-card class="z-depth-1 mat-elevation-z1" *ngIf="displayTitle && title !== \'\'">\n    <div style="text-align: center;">\n        <div style="margin: 1px 2px; padding: 1em">\n            {{ title }}\n        </div>\n    </div>\n</mat-card>',styles:["@import url(https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/css/bootstrap-grid.min.css);mat-card,mat-slider{padding:0!important}button:focus,button:hover{outline:0!important}.ngx-basic-audio-player{min-width:300px}svg{vertical-align:top}.mat-icon{height:32px!important;width:32px!important}.material-icons{font-size:32px!important}mat-card{background:rgba(0,0,0,.02)}"]}),y("design:paramtypes",[])],n)}(f),w=function(){function t(){}return t.prototype.transform=function(t){return("0"+Math.floor(t/60)).slice(-2)+":"+("0"+t%60).slice(-2)},t=g([e.Pipe({name:"secondsToMinutes"})],t)}(),S=function(){function t(){}return t=g([e.NgModule({declarations:[b,w,x],imports:[d.CommonModule,c.FormsModule,p.MatButtonModule,s.MatCardModule,a.MatTableModule,l.MatFormFieldModule,o.MatSliderModule,r.MatExpansionModule,i.MatPaginatorModule,u.MatIconModule],exports:[b,x],providers:[v]}),y("design:paramtypes",[])],t)}(),P=function(){};t.MatAdvancedAudioPlayerComponent=x,t.MatBasicAudioPlayerComponent=b,t.NgxAudioPlayerModule=S,t.Track=P,t.ɵa=f,t.ɵb=v,t.ɵc=w,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-audio-player.umd.min.js.map