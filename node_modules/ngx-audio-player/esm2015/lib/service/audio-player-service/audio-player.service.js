import { __decorate, __metadata } from "tslib";
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
let AudioPlayerService = class AudioPlayerService {
    constructor() {
        this.playlist = [];
        this.indexSong = 0;
        this.currentTrack = new BehaviorSubject(this.playlist[this.indexSong]);
        this.currentTime = 0;
        this.duration = 0;
    }
    init() {
        this.updateCurrentSong();
    }
    nextSong() {
        if ((this.indexSong + 1) >= this.playlist.length) {
            this.indexSong = 0;
        }
        else {
            this.indexSong++;
        }
        this.updateCurrentSong();
    }
    previousSong() {
        if ((this.indexSong - 1) < 0) {
            this.indexSong = (this.playlist.length - 1);
        }
        else {
            this.indexSong--;
        }
        this.updateCurrentSong();
    }
    resetPlaylist() {
        this.indexSong = 0;
        this.updateCurrentSong();
    }
    selectATrack(index) {
        this.indexSong = index - 1;
        this.updateCurrentSong();
    }
    updateCurrentSong() {
        const current = this.playlist[this.indexSong];
        const previous = ((this.indexSong - 1) >= 0) ? this.playlist[this.indexSong - 1] : this.playlist[this.playlist.length - 1];
        const next = ((this.indexSong + 1) >= this.playlist.length) ? this.playlist[0] : this.playlist[this.indexSong + 1];
        this.currentTrack.next([
            previous,
            current,
            next
        ]);
    }
    getSubjectCurrentTrack() {
        return this.currentTrack;
    }
    getPlaylist() {
        return this.playlist;
    }
    setPlaylist(playlist) {
        this.playlist = playlist;
    }
    getIndexSong() {
        return this.indexSong;
    }
};
AudioPlayerService = __decorate([
    Injectable(),
    __metadata("design:paramtypes", [])
], AudioPlayerService);
export { AudioPlayerService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVkaW8tcGxheWVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtYXVkaW8tcGxheWVyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2UvYXVkaW8tcGxheWVyLXNlcnZpY2UvYXVkaW8tcGxheWVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUl2QyxJQUFhLGtCQUFrQixHQUEvQixNQUFhLGtCQUFrQjtJQVM3QjtRQVBBLGFBQVEsR0FBWSxFQUFFLENBQUM7UUFFdkIsY0FBUyxHQUFHLENBQUMsQ0FBQztRQUNkLGlCQUFZLEdBQXdCLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDdkYsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFDaEIsYUFBUSxHQUFHLENBQUMsQ0FBQztJQUliLENBQUM7SUFFRCxJQUFJO1FBQ0YsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRTtZQUNoRCxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztTQUNwQjthQUFNO1lBQ0wsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1NBQ2xCO1FBQ0QsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELFlBQVk7UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDNUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQzdDO2FBQU07WUFDTCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDbEI7UUFDRCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsYUFBYTtRQUNYLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRCxZQUFZLENBQUMsS0FBYTtRQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELGlCQUFpQjtRQUNmLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0gsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRW5ILElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDO1lBQ3JCLFFBQVE7WUFDUixPQUFPO1lBQ1AsSUFBSTtTQUNMLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxzQkFBc0I7UUFDcEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7SUFFRCxXQUFXO1FBQ1QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxXQUFXLENBQUMsUUFBaUI7UUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVELFlBQVk7UUFDVixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsQ0FBQztDQUNGLENBQUE7QUF4RVksa0JBQWtCO0lBRDlCLFVBQVUsRUFBRTs7R0FDQSxrQkFBa0IsQ0F3RTlCO1NBeEVZLGtCQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgVHJhY2sgfSBmcm9tICcuLi8uLi9tb2RlbC90cmFjay5tb2RlbCc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBBdWRpb1BsYXllclNlcnZpY2Uge1xuXG4gIHBsYXlsaXN0OiBUcmFja1tdID0gW107XG5cbiAgaW5kZXhTb25nID0gMDtcbiAgY3VycmVudFRyYWNrOiBCZWhhdmlvclN1YmplY3Q8e30+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCh0aGlzLnBsYXlsaXN0W3RoaXMuaW5kZXhTb25nXSk7XG4gIGN1cnJlbnRUaW1lID0gMDtcbiAgZHVyYXRpb24gPSAwO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuXG4gIH1cblxuICBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlQ3VycmVudFNvbmcoKTtcbiAgfVxuXG4gIG5leHRTb25nKCk6IHZvaWQge1xuICAgIGlmICgodGhpcy5pbmRleFNvbmcgKyAxKSA+PSB0aGlzLnBsYXlsaXN0Lmxlbmd0aCkge1xuICAgICAgdGhpcy5pbmRleFNvbmcgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluZGV4U29uZysrO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRTb25nKCk7XG4gIH1cblxuICBwcmV2aW91c1NvbmcoKTogdm9pZCB7XG4gICAgaWYgKCh0aGlzLmluZGV4U29uZyAtIDEpIDwgMCkge1xuICAgICAgdGhpcy5pbmRleFNvbmcgPSAodGhpcy5wbGF5bGlzdC5sZW5ndGggLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmRleFNvbmctLTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVDdXJyZW50U29uZygpO1xuICB9XG5cbiAgcmVzZXRQbGF5bGlzdCgpOiB2b2lkIHtcbiAgICB0aGlzLmluZGV4U29uZyA9IDA7XG4gICAgdGhpcy51cGRhdGVDdXJyZW50U29uZygpO1xuICB9XG5cbiAgc2VsZWN0QVRyYWNrKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmluZGV4U29uZyA9IGluZGV4IC0gMTtcbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRTb25nKCk7XG4gIH1cblxuICB1cGRhdGVDdXJyZW50U29uZygpOiB2b2lkIHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5wbGF5bGlzdFt0aGlzLmluZGV4U29uZ107XG4gICAgY29uc3QgcHJldmlvdXMgPSAoKHRoaXMuaW5kZXhTb25nIC0gMSkgPj0gMCkgPyB0aGlzLnBsYXlsaXN0W3RoaXMuaW5kZXhTb25nIC0gMV0gOiB0aGlzLnBsYXlsaXN0W3RoaXMucGxheWxpc3QubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbmV4dCA9ICgodGhpcy5pbmRleFNvbmcgKyAxKSA+PSB0aGlzLnBsYXlsaXN0Lmxlbmd0aCkgPyB0aGlzLnBsYXlsaXN0WzBdIDogdGhpcy5wbGF5bGlzdFt0aGlzLmluZGV4U29uZyArIDFdO1xuXG4gICAgdGhpcy5jdXJyZW50VHJhY2submV4dChbXG4gICAgICBwcmV2aW91cyxcbiAgICAgIGN1cnJlbnQsXG4gICAgICBuZXh0XG4gICAgXSk7XG4gIH1cblxuICBnZXRTdWJqZWN0Q3VycmVudFRyYWNrKCk6IEJlaGF2aW9yU3ViamVjdDx7fT4ge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRUcmFjaztcbiAgfVxuXG4gIGdldFBsYXlsaXN0KCk6IFRyYWNrW10ge1xuICAgIHJldHVybiB0aGlzLnBsYXlsaXN0O1xuICB9XG5cbiAgc2V0UGxheWxpc3QocGxheWxpc3Q6IFRyYWNrW10pIHtcbiAgICB0aGlzLnBsYXlsaXN0ID0gcGxheWxpc3Q7XG4gIH1cblxuICBnZXRJbmRleFNvbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhTb25nO1xuICB9XG59XG4iXX0=